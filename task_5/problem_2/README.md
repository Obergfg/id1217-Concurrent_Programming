Dining philosophers

Develop a distributed application that simulates the dining philosophers. You can implement your distributed application in C using the MPI library or in Java using the socket API or Java RMI. Your program should have five philosopher processes and one server process that represents/manages the table. Simulate eating and thinking by having a philosopher sleep for a random amount of time. Your program should print a trace of the interesting events as they happen. Your application must be distributed. In comments in the program or in a README file, shortly explain your solution (algorithm).


Solution

The main function initializes th MPI execution environment through the MPI_Init call with the arguments added via the command line. This is followed by determening the rank of the calling process as well as the group associated with the environment communicator via the calls to MPI_Comm_rank as well as MPI_Comm_size. The program then checks if the rank is above one and calls the function philosopher if that is the case. Otherwise is the waiter function called.

The waiter function works as the server where it waits for a philosopher to send a message. When a message is received it states which left and right fork the pholosopher is using. The waiter sets the forks to one if the philosopher sending the message has been eating, indicating that they are available for other philosophers to use. This is followed by listening once again for a message from a philosopher. If the message received is from a philosopher who was not currently eating the waiter checks if the forks adjacent to the philosopher are available. If they are, it sets the isDining variable as well as the forks corresponding to the philosopher to one indicating that the philosopher now is eating and that the adjacent forks are unavailable for other philosophers to use. This is sent back to the philosopher MPI_Send call with the eat variable as argument.

The philosopher function working as the client starts with a random waiting time followed by a MPI_Send function call to the waiter thread to check if the philosopher can start to eat. The philosopher starts to eat for a randomly generated time if the received eat variable is set to one, followed by a MPI_Send function call back to the waiter indicating that the philosopher is done eating and returns the forks. If eat is set to zero it indicates that the forks corresponding to the philosopher are occupied and the philosopher starts to think for a random amunt of time followed by a new message sent to the waiter working as a new eat request. 